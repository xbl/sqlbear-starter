name: CI

on: [push]

jobs:
  build_mac_zip:

    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Create temp folder
      env:
        target: sqlbear_mac_x64
      run: |
        sudo mkdir -p /dist/$target
    - name: Copy to temp folder
      run: |
        sudo cp -Rf ./* /dist/$target
    - name: Download Mac jre
      run: |
        wget https://github.com/AdoptOpenJDK/openjdk13-binaries/releases/download/jdk-13%2B33/OpenJDK13U-jre_x64_mac_hotspot_13_33.tar.gz
        tar -xf OpenJDK13U-jre_x64_mac_hotspot_13_33.tar.gz
        sudo cp -r ./jdk-13+33-jre/Contents/Home /dist/$target/jre/
    - name: Archive zip
      uses: actions/upload-artifact@v1
      with:
        name: $target
        path: /dist/$target
